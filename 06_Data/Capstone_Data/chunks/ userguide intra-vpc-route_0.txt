AWSDocumentationAmazon VPCUser GuideCustom route table for subnet ACustom route table for subnet BMain route tableInspect traffic between subnetsConsider the scenario where you have multiple subnets in a VPC and you want to inspect the traffic between them using a firewall appliance. Configure and install the firewall appliance on an EC2 instance in a separate subnet in your VPC.The following diagram shows a firewall appliance installed on an EC2 instance in subnet C. The appliance inspects all traffic that travels from subnet A to subnet B (see 1) and from subnet B to subnet A (see 2).You use the main route table for the VPC and the middlebox subnet. Subnets A and B each have a custom route table.The middlebox routing wizard, automatically performs the following operations:Creates the route tables.Adds the necessary routes to the new route tables.