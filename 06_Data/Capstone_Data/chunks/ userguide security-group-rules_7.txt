If you configure routes to forward the traffic between two instances in different subnets through a middlebox appliance, you must ensure that the security groups for both instances allow traffic to flow between the instances. The security group for each instance must reference the private IP address of the other instance or the CIDR range of the subnet that contains the other instance as the source. If you reference the security group of the other instance as the source, this does not allow traffic to flow between the instances.Security group sizeThe type of source or destination determines how each rule counts toward the maximum number of rules that you can have per security group.A rule that references a CIDR block counts as one rule.A rule that references another security group counts as one rule, no matter the size of the referenced security group.